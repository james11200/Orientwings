<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>表單</title>
    <!-- 引入Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #EEECE3;
        }
        /* Custom button color */
        .custom-btn {
            background-color: white; /* Bootstrap's primary color */
            border-color: white; /* Match button border color */
        }
        /* Custom button color when hovered */
        .custom-btn:hover {
            background-color: #138496; /* Darker shade of primary color */
            border-color: #138496; /* Match button border color on hover */
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <button type="button" class="btn custom-btn" id="btnEnglish">English</button>
        <button type="button" class="btn custom-btn" id="btnChinese">中文</button>
        <p></p>
        <h1>表單</h1>
        <form id="DocForm" novalidate>
            <div class="mb-3">
                <label for="selectOption" class="form-label">請選擇需要的服務項目</label>
                <select class="form-select" id="selectOption" name="selectOption">
                    <option value="Brand Agency">品牌代理</option>
                    <option value="Business Sales">經營銷售</option>
                    <option value="Find Asian Suppliers">尋找亞洲供應商</option>
                    <option value="International Shipping">國際運輸</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="inputRequirement" class="form-label">需求</label>
                <input type="text" class="form-control" id="inputRequirement" name="inputRequirement" required>
            </div>
            <div class="mb-3">
                <label for="inputSpec" class="form-label">規格</label>
                <input type="text" class="form-control" id="inputSpec" name="inputSpec" required>
            </div>
            <div class="mb-3">
                <label for="inputBudget" class="form-label">預算</label>
                <input type="text" class="form-control" id="inputBudget" name="inputBudget">
                <div id="budgetError" class="invalid-feedback">Please enter a budget.</div>
            </div>
            <button type="submit" class="btn custom-btn">送出</button>
        </form>
    </div>

    <!-- 引入Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 引入jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function(){
            // Default language is Chinese
            $('#btnEnglish').show();
            $('#btnChinese').hide();

            $('#btnEnglish').click(function(){
                // Show English content
                $('#btnEnglish').hide();
                $('#btnChinese').show();
                $('h1').text('Form');
                $('label[for="selectOption"]').text('Please select the desired service');
                $('option[value="Brand Agency"]').text('Brand Agency');
                $('option[value="Business Sales"]').text('Business Sales');
                $('option[value="Find Asian Suppliers"]').text('Find Asian Suppliers');
                $('option[value="International Shipping"]').text('International Shipping');
                $('label[for="inputRequirement"]').text('Requirement');
                $('label[for="inputSpec"]').text('Specification');
                $('label[for="inputBudget"]').text('Budget');
                $('button[type="submit"]').text('Submit');
            });

            $('#btnChinese').click(function(){
                // Show Chinese content
                $('#btnEnglish').show();
                $('#btnChinese').hide();
                $('h1').text('表單');
                $('label[for="selectOption"]').text('請選擇需要的服務項目');
                $('option[value="Brand Agency"]').text('品牌代理');
                $('option[value="Business Sales"]').text('經營銷售');
                $('option[value="Find Asian Suppliers"]').text('尋找亞洲供應商');
                $('option[value="International Shipping"]').text('國際運輸');
                $('label[for="inputRequirement"]').text('需求');
                $('label[for="inputSpec"]').text('規格');
                $('label[for="inputBudget"]').text('預算');
                $('button[type="submit"]').text('送出');
            });

            $('#budgetError').hide();

            $('#DocForm').submit(function(e){
                e.preventDefault();

                // Custom validation logic for Budget field
                var budgetValue = $('#inputBudget').val().trim();
                if (!budgetValue) {
                    $('#inputBudget').addClass('is-invalid');
                    $('#budgetError').show(); // Show error message
                    return; // Stop form submission
                } else {
                    $('#inputBudget').removeClass('is-invalid');
                    $('#budgetError').hide(); // Hide error message
                }                

                // Proceed with form submission
                var formData = $(this).serializeArray();
                var jsonData = {};

                // Store selected option text instead of value
                var selectedOptionText = $('#selectOption option:selected').text();
                jsonData['selectOption'] = selectedOptionText;

                // Store form data in jsonData object
                $(formData).each(function(index, obj){
                    jsonData[obj.name] = obj.value;
                });
                
                // Convert jsonData to JSON string
                var jsonString = JSON.stringify(jsonData);
                
                // Save JSON data to a file (example: form_data.json)
                saveToFile(jsonString, 'form_data.json');
            });

            // Function to save JSON data to a file
            function saveToFile(data, filename) {
                var blob = new Blob([data], { type: 'application/json' });
                var url = URL.createObjectURL(blob);
                var a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        });
    </script>
</body>
</html>
